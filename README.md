
# BraveJourney

#### 项目介绍
《勇闯天涯》是一款单机肉鸽闯关游戏。玩家通过选择角色、房间路线，击杀敌人获取道具提升自身，最终挑战大boss赢得胜利。游戏包含四种模式，各模式玩法与难度不同，具体如下：

- 教学模式：固定角色，通过文本指导玩家掌握移动、攻击、攻击范围判定操作。
- 普通模式：提供多角色选择，玩家可正常体验选路线、杀敌人、拿道具、闯关卡的完整流程。
- 进阶模式：提升敌人数值与数量，减少道具增益效果，增加游戏挑战难度。
- 地狱模式：进一步调整敌人数值和敌人密度，同时减少道具增益，为高难度挑战模式。

游戏核心元素包括角色（含生命值、防御、攻击力、攻击范围四个基本属性，通过wasd移动）、敌人（含四个与角色相同的基本属性，随机移动且持续攻击，击杀后提供道具或武器）、关卡（包含敌人、障碍物、陷阱、回血包、出生点，击杀敌人后地图出现道具或武器及传送点，进入传送点可选择路线）、事件（分敌人、恢复、增减益三类，随机触发，以图标在页面显示，恢复事件对应恢复房间，可恢复部分血量）。

#### 软件架构
软件架构采用模块化分层设计，以“Game上下文”为核心枢纽，串联各功能模块。整体架构分为数据层、逻辑层、表现层：

- 数据层：负责存储角色属性（生命值、防御、攻击力、攻击范围）、敌人属性、道具信息、关卡布局数据及游戏模式参数（如各模式下敌人数值、数量、道具增益系数），保障数据的持久化与一致性。
- 逻辑层：包含Game模块、事件总线、事件监听器等核心组件，处理游戏核心逻辑，如角色移动攻击判定、敌人AI行为（随机移动、持续攻击）、关卡切换、事件触发与结算（恢复血量、属性增减益等）。
- 表现层：负责游戏画面渲染，包括角色与敌人模型展示、房间路线选择界面、事件图标显示、文本教程呈现（如教学模式指导内容），同时处理玩家输入（wasd移动操作）的响应与反馈。

#### 接口定义
1. 事件总线（EventBus）：作为模块间通信的核心枢纽，提供事件的注册、发布与订阅功能。支持接收各模块发送的事件（如角色移动事件、敌人攻击事件等），并将事件分发至对应的事件监听器。
2. 事件（Event）：定义了游戏中各类行为的抽象表示，包含角色操作事件（如角色移动、攻击）、敌人交互事件（如敌人移动、死亡）、关卡与事件触发事件（如房间选择、恢复/增减益事件触发）、关卡切换事件（如传送点进入、关卡加载完成）等类型。
3. 事件监听器（EventListener）：针对特定事件类型进行监听，接收事件总线分发的事件并执行对应逻辑。例如，角色攻击监听器接收角色攻击事件后，处理攻击命中判定与敌人伤害计算；敌人死亡监听器接收敌人死亡事件后，触发道具掉落与传送点生成逻辑。
4. Game上下文（GameContext）：存储游戏的全局状态数据，包括当前角色属性、游戏模式参数（如各模式下敌人数值、数量、道具增益系数）、关卡进度、玩家血量与持有道具信息等。提供数据的读写接口，供各模块获取与修改游戏全局状态，保障游戏逻辑的连贯运行。
5. Game模块（GameModule）：包含游戏核心功能的子模块集合，如角色管理模块（负责角色属性初始化、更新与移动控制）、敌人管理模块（负责敌人生成、AI控制与状态更新）、关卡管理模块（负责关卡加载、房间路线管理与关卡切换）、事件管理模块（负责事件生成、触发与结算）等，各子模块通过调用 GameContext 接口与事件总线，协同完成游戏流程。

#### 模块定义
1. 角色管理模块（CharacterManagementModule）：负责角色的初始化（根据选择的角色类型加载基础属性）、属性更新（获取道具或触发增减益事件后更新生命值、防御、攻击、攻击范围）以及移动控制（接收玩家输入指令，控制角色位置移动）。
2. 敌人管理模块（EnemyManagementModule）：依据当前游戏模式参数，生成对应数值与数量的敌人；控制敌人的随机移动与持续攻击行为；在敌人死亡时，触发道具或武器掉落逻辑，并更新敌人存活数量。
3. 关卡管理模块（LevelManagementModule）：加载关卡布局（包含敌人、障碍物、陷阱、回血包、出生点等位置数据）；管理房间路线选择功能（玩家进入传送点后展示可选房间列表）；处理关卡切换逻辑，完成当前关卡结算与下一关卡加载。
4. 事件管理模块（EventManagementModule）：随机生成敌人、恢复、增减益三类事件；在玩家进入对应房间时触发事件，如恢复事件触发时调用血量恢复逻辑，增减益事件触发时调用角色属性调整逻辑；同时负责事件图标的页面显示与状态管理。
5. 模式管理模块（ModeManagementModule）：初始化各游戏模式的参数（如教学模式固定角色与操作指导，进阶/地狱模式调整敌人数值、数量及道具增益系数）；监控当前游戏模式状态，确保各模式下游戏规则（如教学模式的操作引导、高难度模式的难度设定）正常生效。
6. 道具管理模块（ItemManagementModule）：管理道具（含武器）的生成（敌人死亡时掉落）、属性数据（如道具对角色属性的增益数值）；在玩家获取道具后，调用角色管理模块接口更新角色属性。

#### 参与贡献
郑文俊  美工与音乐
曾栋湘 关卡设计与音乐
冯正源 代码技术
易泽西 代码技术
何宏     代码技术
